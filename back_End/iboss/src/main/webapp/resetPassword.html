<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset_Password</title>
    <link rel="stylesheet" href="./css/login3.css">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

</head>

<body>
    <div id="particles-js"></div>
    <div class="login-box">
        <h2>密碼重設</h2>
        <form action="/resetPassword" method="post" class="form">

            <input type="hidden" id="token" name= "token" value= "`{$token}`">

            <div class="user-box">
                <input type="password" id="password" name="password" value="" required="autofocus">
                <label>密碼</label>
            </div>
            <div class="user-box">
                <input type="password" name="confirmPassword" value="" required="autofocus"
                    oninput="checkPasswordMatch(this);">
                <label>確認密碼</label>
            </div>

            <div style=" text-align: center;">
                <button type="submit" class="login" id="login">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    更改
                </button>
            </div>

        </form>
    </div>

    <!-- <script src="particles.js"></script> -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <!-- <script>
        particlesJS.load('particles-js', 'particlesjs-config.json', function() {
        console.log('callback - particles.js config loaded');
        });
    </script> -->
    <script src="./js/login.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src='https://code.jquery.com/jquery-3.6.0.min.js'></script>
  <script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script>
        function checkPasswordMatch(fieldConfirmPassword) {
            if (fieldConfirmPassword.value != $("#password").val()) {
                fieldConfirmPassword.setCustomValidity("密碼不相符!!!");
            } else {
                fieldConfirmPassword.setCustomValidity("");
            }
        }


    var id = $.cookie('session_id');
    $.ajax({
      url:`/profiles/select/${id}`,
      dataType: "JSON",
      success: function(data){
        console.log(data);
        $("#token").attr("value",`${data.resetPasswordToken}`);        
      }
    })




    </script>

    
</body>

</html>